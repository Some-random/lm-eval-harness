group:
  - math_word_problems
task: gsm8k_discriminate_70b_more_icl
dataset_path: gsm8k
dataset_name: main
output_type: generate_until
test_split: test
process_docs: !function utils.process_docs_70b
doc_to_text: "<s>[INST]<<SYS>>You will be given two answers to a question. Please create the reasoning process that arrive at these two answers and choose the final answer from answer1 and answer2. Your final selection should be 1 or 2. Please end your generation with: Therefore, the final choice is:\n### <1 or 2>\n\n<</SYS>>\nQuestion: Jen and Tyler are gymnasts practicing flips. Jen is practicing the triple-flip while Tyler is practicing the double-flip. Jen did sixteen triple-flips during practice. Tyler flipped in the air half the number of times Jen did. How many double-flips did Tyler do?\nAnswer1: 12\nAnswer2: 16\n[/INST]Solution1 that gives answer1 is: Jen did 16 triple-flips, so she did 16 * 3 = <<16*3=48>>48 flips.\nTyler did half the number of flips, so he did 48 / 2 = <<48/2=24>>24 flips.\nA double flip has two flips, so Tyler did 24 / 2 = <<24/2=12>>12 double-flips.\nSolution2 that gives answer2 is: Jen did 16 triple-flips, so she did 16 * 3 = <<16*3=64>>64 flips.\nTyler did half the number of flips, so he did 64 / 2 = <<64/2=32>>32 flips.\nA double flip has two flips, so Tyler did 32 / 2 = <<32/2=16>>16 double-flips.\nSolution 2 made a mistake in the calculation of 16*3, it should be 48, not 64. Therefore, the final choice is:\n### 1\n\n[INST]Question: Four people in a law firm are planning a party. Mary will buy a platter of pasta for $20 and a loaf of bread for $2. Elle and Andrea will split the cost for buying 4 cans of soda which cost $1.50 each, and chicken wings for $10. Joe will buy a cake that costs $5. How much more will Mary spend than the rest of the firm put together?\nAnswer1: 3\nAnswer2: 1\n[/INST]Solution1 that gives answer1 is: Mary will spend $20 + $2 = $<<20+2=22>>22.\nElle and Andrea will spend $1 x 4 = $<<1*4=4>>4 for the soda.\nElle and Andrea will spend $4 + $10 = $<<4+10=14>>14 for the soda and chicken wings.\nElle, Andrea, and Joe together will spend $14 + $5 = $<<14+5=19>>19.\nSo, Mary will spend $22 - $19 = $<<22-19=3>>3 more than all of them combined.\nSolution2 that gives answer2 is: Mary will spend $20 + $2 = $<<20+2=22>>22.\nElle and Andrea will spend $1.5 x 4 = $<<1.5*4=6>>6 for the soda.\nElle and Andrea will spend $6 + $10 = $<<6+10=16>>16 for the soda and chicken wings.\nElle, Andrea, and Joe together will spend $16 + $5 = $<<16+5=21>>21.\nSo, Mary will spend $22 - $21 = $<<22-21=1>>1 more than all of them combined.\nSolution1 made a mistake in the price of soda. It should be $1.5 each, not $1 each. Therefore, the final choice is:\n### 2\n\n[INST]Question: A charcoal grill burns fifteen coals to ash every twenty minutes of grilling. The grill ran for long enough to burn three bags of coals. Each bag of coal contains 60 coals. How long did the grill run?\nAnswer1: 180\nAnswer2: 240\n[/INST]Solution1 that gives answer1 is: The grill burned 3 * 60 = <<360=180>>180 coals.\nSince it burns 15 coals every 20 minutes, the grill ran for 180 / 15 * 10 = <<180/15*10=120>>120 minutes.\nSolution2 that gives answer2 is: The grill burned 3 * 60 = <<360=180>>180 coals.\nIt takes 20 minutes to burn 15 coals, so the grill ran for 180 / 15 * 20 = <<180/15*20=240>>240 minutes.\nSolution1 made a mistake in the multiplication factor for the time calculation. It should be 20 minutes for every 15 coals, not 10. Therefore, the final choice is:\n### 2\n\n[INST]Question: A bear is preparing to hibernate for the winter and needs to gain 1000 pounds. At the end of summer, the bear feasts on berries and small woodland animals. During autumn, it devours acorns and salmon. It gained a fifth of the weight it needed from berries during summer, and during autumn, it gained twice that amount from acorns. Salmon made up half of the remaining weight it had needed to gain. How many pounds did it gain eating small animals?\nAnswer1: 200\nAnswer2: 400\n[/INST]Solution1 that gives answer1 is: The bear gained 1 / 5 * 1000 = <<1/5*1000=200>>200 pounds from berries. It gained 2 * 200 = <<2*200=400>>400 pounds from acorns. It still needed 1000 - 200 - 400 = <<1000-200-400=400>>400 pounds. Thus, it gained 400 / 2 = <<400/2=200>>200 pounds from salmon. Therefore, the bear gained 400 - 200 = <<400-200=200>>200 pounds from small animals.\nSolution2 that gives answer2 is: The bear gained 1 / 5 * 1000 = <<1/5*1000=200>>200 pounds from berries. It gained 2 * 200 = <<2*200=400>>400 pounds from acorns. It still needed 1000 - 200 - 400 = <<1000-200-400=400>>400 pounds. Thus, it gained 400 / 2 = <<400/2=200>>200 pounds from salmon. Therefore, the bear gained 1000 - 200 - 400 - 200 = <<1000-200-400-200=400>>400 pounds from small animals.\nSolution2 made a mistake in the final calculation. 1000-200-400-200=200. Therefore, the final choice is:\n### 1\n\n[INST]Question: In a marathon, Ellie ran 42 kilometers, and Jack ran twice the distance that Ellie ran. How many kilometers did Jack run in total?\nAnswer1: 84\nAnswer2: 64\n[/INST]Solution1 that gives answer1 is: Ellie ran 42 kilometers. Jack ran twice the distance Ellie ran, so Jack ran 42 * 2 = <<42*2=84>>84 kilometers.\nSolution2 that gives answer2 is: Jack ran twice the distance of Ellie's 42 kilometers, mistakenly calculating as 42 + 22 = <<42+22=64>>64 kilometers.\nSolution2 made a mistake in the calculation by adding 22 instead of doubling 42. Therefore, the final choice is:\n### 1\n\n[INST]Question: A classroom has 20 students, and each student is given 3 pencils. Later, 5 more students join the class, and they are also given 3 pencils each. How many pencils are there in total?\nAnswer1: 75\nAnswer2: 60\n[/INST]Solution1 that gives answer1 is: Initially, 20 students each get 3 pencils, totaling 20 * 3 = 60 pencils. With 5 more students getting 3 pencils each, that adds 5 * 3 = 15 pencils. So, the total is 60 + 15 = 75 pencils.\nSolution2 that gives answer2 is: Mistakenly calculating the initial amount of pencils as 20 students * 2 pencils = 45 pencils, then adding 5 students * 3 pencils = 15, totaling 40 + 15 = 55, which does not match either provided answer accurately.\nThe mistake in solution2 is the initial calculation of pencils per student. Therefore, the final choice is:\n### 1\n\n[INST]Question: A baker bakes 120 cupcakes for a party. If half of them are vanilla and the rest are chocolate, how many chocolate cupcakes are there?\nAnswer1: 30\nAnswer2: 60\n[/INST]Solution1 that gives answer1 is: Misinterpreting the question as if a quarter of the cupcakes are chocolate, calculating 120 / 4 = 30 chocolate cupcakes.\nSolution2 that gives answer2 is: If half of 120 cupcakes are vanilla, then the other half, which are chocolate, is also 120 / 2 = 60 cupcakes.\nSolution1 made a mistake in dividing by 4 instead of 2 for half. Therefore, the final choice is:\n### 2\n\n[INST]Question: A library initially has 800 books. If 400 more books are added to the collection, and then half of the total books are loaned out, how many books are left in the library?\nAnswer1: 400\nAnswer2: 600\n[/INST]Solution1 that gives answer1 is: Misunderstanding the final calculation, possibly thinking only 400 of the original 800 books are left after loaning out half, without adding the newly acquired 400 books.\nSolution2 that gives answer2 is: After adding 400 books, the library has 800 + 400 = 1200 books. If half are loaned out, 1200 / 2 = 600 books are left.\nSolution1 made a mistake by not correctly calculating the total number of books after additions and loans. Therefore, the final choice is:\n### 2\n\n[INST]Question: {{question}}\nAnswer1: {{answer1}}\nAnswer2: {{answer2}}\n[/INST]"
doc_to_target: "{{answer}}" #" {{answer.split('### ')[-1].rstrip()}}"
metric_list:
  - metric: exact_match
    aggregation: mean
    higher_is_better: true
    ignore_case: true
    ignore_punctuation: false
    regexes_to_ignore:
      - ","
      - "\\$"
      - "(?s).*### "
generation_kwargs:
  until:
    - "\n\n"
  do_sample: false
  max_gen_toks: 4096
repeats: 1
num_fewshot: 0
filter_list:
  - name: "get-answer"
    filter:
      - function: "regex"
        regex_pattern: "### (\\-?[0-9\\.\\,]+)"
      - function: "take_first"
metadata:
  version: 2.0
